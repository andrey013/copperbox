-- Mullein.Gen.SyntaxDEFS
-- Copyright   :  (c) Stephen Tetley 2009


INCLUDE "SyntaxTOP.ag"


SET Every = Section AllBars AllVoiceUnit AllPulsation AllElements

SET AllBars       = Bars Bar
SET AllVoiceUnit  = VoiceUnits VoiceUnit
SET AllPulsation  = Pulsations Pulsation 
SET AllElements   = Elements Element

-- The Element datatype - represents elements with a 'unit duration'.
-- E.g a chord has a set of pitches but the unit duration is common to all 
-- of them. 
DATA Element
  | Note      pitch           : {Pitch}
              duration        : {Duration}
  | Rest      duration        : {Duration}
  | Spacer    duration        : {Duration}
  | Chord     pitches         : {[Pitch]} 
              duration        : {Duration}          
  | GraceNotes 
              notes           : GraceNotes                              
  | Nplet     multipier       : {Int}
              unit_duration   : {Duration}
              pitches         : {[Pitch]}
        
TYPE GraceNotes = [GraceNote]
TYPE GraceNote = (Pitch,Duration)

