-- Mullein.Gen.SyntaxDEFS
-- Copyright   :  (c) Stephen Tetley 2009


INCLUDE "SyntaxTOP.ag"


SET Every = Section AllBar AllVoiceUnit AllPulsation AllElement AllGrace Pitches

SET AllBar        = Bars Bar
SET AllVoiceUnit  = VoiceUnits VoiceUnit
SET AllPulsation  = Pulsations Pulsation 
SET AllElement    = Elements Element
SET AllGrace      = GraceNotes GraceNote


-- The Element datatype - represents elements with a 'unit duration'.
-- E.g a chord has a set of pitches but the unit duration is common to all 
-- of them. 
DATA Element
  | Note      pitch           : {Pitch}
              duration        : {Duration}
  | Rest      duration        : {Duration}
  | Spacer    duration        : {Duration}
  | Chord     pitches         : Pitches
              duration        : {Duration}          
  | GraceNotes 
              graces          : GraceNotes                              
  | Nplet     multipier       : {Int}
              unit_duration   : {Duration}
              pitches         : Pitches
        
TYPE GraceNotes = [GraceNote]
TYPE GraceNote  = (pch : Pitch, drn : Duration)
TYPE Pitches    = [Pitch]

